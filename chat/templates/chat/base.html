<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}Chat App{% endblock %}</title>
    <style>
        body { margin:0; font-family: Arial, sans-serif; background:#f1f3f5; }
        .app { display:flex; height:100vh; }
        .sidebar {
            width:250px;
            background:#1f2937;
            color:#fff;
            padding:20px;
            box-sizing:border-box;
        }
        .sidebar h1 { margin:0 0 16px 0; font-size:20px; }
        .btn { display:block; background:#374151; color:#fff; padding:10px; border-radius:6px; text-decoration:none; margin-bottom:12px; text-align:center; }
        .convo-list { margin-top:10px; max-height:70vh; overflow:auto; }
        .convo-item { padding:10px; margin-bottom:8px; background:#111827; border-radius:6px; color:#fff; text-decoration:none; display:block; }
        .convo-item.active { background:#10a37f; color:#fff; font-weight:bold; }
        .main { flex:1; padding:20px; overflow:auto; }
        .logout { margin-top: 20px; color:#ff6b6b; text-decoration:none; display:inline-block; }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body>
<div class="app">
    <div class="sidebar">
        <h1>Chat App</h1>
        <a href="{% url 'new_conversation' %}" class="btn">+ New Conversation</a>
        <div class="convo-list">
            {% if all_conversations %}
                {% for c in all_conversations %}
                    <a href="{% url 'conversation_detail' c.id %}" class="convo-item {% if conversation and conversation.id == c.id %}active{% endif %}">
                        {{ c.title|truncatechars:30 }}
                    </a>
                {% endfor %}
            {% else %}
                <div style="color:#cbd5e1; margin-top:12px;">No chats yet</div>
            {% endif %}
        </div>
        <a href="{% url 'logout' %}" class="logout">Logout</a>
    </div>

    <div class="main">
        {% block content %}{% endblock %}
    </div>
</div>
</body>
</html>
